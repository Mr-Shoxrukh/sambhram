<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crud - Create, Update, Delete</title>
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <!-- MDB -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.2/mdb.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container text-center px-3">
      <!-- Form -->
      <form class="w-50 mx-auto my-3">
        <!-- Email input -->
        <input
          type="text"
          id="inputName"
          class="form-control my-2"
          placeholder="Enter Full name"
          name=""
        />

        <!-- Submit button -->
        <button
          data-mdb-ripple-init
          type="submit"
          class="btn btn-primary btn-block w-50 m-auto"
          id="createBtn"
        >
          Create
        </button>
        <button
          data-mdb-ripple-init
          type="submit"
          class="btn btn-primary btn-block w-50 m-auto"
          style="display: none"
          id="editBtn"
        >
          Save
        </button>
      </form>

      <!-- Table -->
      <table class="table">
        <thead>
          <tr>
            <th scope="col">No</th>
            <th scope="col">Full Name</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody id="showBody">
          <!-- // -->
        </tbody>
      </table>
    </div>

    <script>
      const createBtn = document.getElementById("createBtn");
      const deleteBtn = document.getElementById("deleteBtn");
      const editBtn = document.getElementById("editBtn");
      const inputName = document.getElementById("inputName");
      const showBody = document.getElementById("showBody");
      var array = [];

      //   create
      createBtn.addEventListener("click", (e) => {
        e.preventDefault();
        array.push(inputName.value);
        localStorage.setItem("userArray", JSON.stringify(array));
        inputName.value = "";
        showTable();
      });

      //   show array
      function showTable() {
        array = JSON.parse(localStorage.getItem("userArray"));
        var showBodyMap = array.map(
          (item, index) =>
            `<tr>
            <th scope="row">${index + 1}</th>
            <td>${item}</td>
            <td>
              <button class="btn btn-primary" onclick="editFun(${index})">
                <i class="fas fa-edit"></i>
              </button>
              <button class="btn btn-danger" onclick="deleteFun(${index})">
                <i class="fas fa-trash"></i>
              </button>
            </td>
          </tr>`
        );
        showBody.innerHTML = showBodyMap.join("");
      }
      showTable();

      //   delete
      function deleteFun(id) {
        if (id >= 0 && id < array.length) {
          array.splice(id, 1); // Remove one item at the specified index
        } else {
          console.error("Invalid index");
        }
        localStorage.setItem("userArray", JSON.stringify(array));
        showTable();
      }

      //   edit
      function editFun(id) {
        editBtn.style.display = "block";
        createBtn.style.display = "none";
        inputName.value = array[id];
        inputName.setAttribute("name", id)
      }

      // save
      editBtn.addEventListener("click", (e) => {
        e.preventDefault();
        var index = inputName.getAttribute("name");
        if (index >= 0 && index < array.length) {
            array[index] = inputName.value;
        }
        localStorage.setItem("userArray", JSON.stringify(array));
        editBtn.style.display = "none";
        createBtn.style.display = "block";
        inputName.value = "";
        showTable();
      });
    </script>
  </body>
</html>
